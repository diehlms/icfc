{"ast":null,"code":"var _jsxFileName = \"/Users/diehl/Documents/Projects/icfc/app/javascript/src/components/rideshare/Index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useEffect, useState } from 'react';\nimport Header from '../shared/PageTitle';\nimport BarLoader from 'react-spinners/BarLoader';\nimport { Table, Form, Input, Grid, Container, Checkbox } from 'semantic-ui-react';\nimport { Breadcrumb } from 'react-bootstrap';\nimport axiosClient from '../../services/axios';\nimport \"./rideshare.css\";\nimport { useDispatch } from 'react-redux';\nimport * as actions from '../../store/actions/index';\nimport RideshareRow from './RideshareItem';\nimport LocationDropdown from './LocationDropdown';\nvar initialFormState = {\n  numberOfPassengers: 0,\n  additionalInformation: '',\n  arrivingAt: null,\n  departingAt: null,\n  departureLocationId: null,\n  arrivalLocationId: null,\n  seeking: true\n};\nexport default function Rideshare(props) {\n  var _this = this;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      sessionId = _useState4[0],\n      setSessionId = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      rideshares = _useState6[0],\n      setRideshares = _useState6[1];\n\n  var _useState7 = useState(initialFormState),\n      _useState8 = _slicedToArray(_useState7, 2),\n      formState = _useState8[0],\n      setFormState = _useState8[1];\n\n  var dispatch = useDispatch();\n  useEffect(function () {\n    setSessionId(props.userId);\n    var isMounted = true;\n    axiosClient.get('rideshares').then(function (res) {\n      if (isMounted) {\n        setRideshares(res.data);\n      }\n    })[\"catch\"](function (err) {\n      setRideshares([]);\n      dispatch(actions.setErrors(\"We're having trouble finding rideshares for your request. Please try again later\"));\n    });\n    return function () {\n      isMounted = false;\n    };\n  }, []);\n\n  var handleChange = function handleChange(e) {\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value;\n    setFormState(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, _defineProperty({}, name, value));\n    });\n  };\n\n  var getRideshares = function getRideshares() {\n    dispatch(actions.loadingStart());\n    axiosClient.get('rideshares').then(function (res) {\n      setRideshares(res.data);\n    })[\"catch\"](function (err) {\n      setRideshares([]);\n      dispatch(actions.setErrors(\"We're having trouble finding rideshares for your request. Please try again later\"));\n    });\n    dispatch(actions.loadingFinish());\n  };\n\n  var updateTypeValue = function updateTypeValue(e) {\n    e.preventDefault();\n    setFormState(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        seeking: !formState.seeking\n      });\n    });\n  };\n\n  var addRideshare = function addRideshare(e) {\n    e.preventDefault();\n    dispatch(actions.loadingStart());\n    var body = {\n      number_of_passengers: formState.numberOfPassengers,\n      additional_information: formState.additionalInformation,\n      point_of_arrival_id: formState.departureLocationId,\n      point_of_departure_id: formState.arrivalLocationId,\n      user_id: props.userId,\n      arriving_at: formState.arrivingAt,\n      departing_at: formState.leavingAt,\n      seeking: formState.seeking\n    };\n    axiosClient.post('rideshares/create', body).then(function () {\n      getRideshares();\n      setFormState(initialFormState);\n      dispatch(actions.setSuccessMessages(\"Rideshare Added!\"));\n    })[\"catch\"](function (err) {\n      dispatch(actions.setErrors(err.response.data.errors));\n    });\n    dispatch(actions.loadingFinish());\n  };\n\n  var setLocationInState = function setLocationInState(locationId, locationType) {\n    var key = locationType + 'LocationId';\n    setFormState(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, _defineProperty({}, key, locationId));\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"reactPageAppContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumb, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    href: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, \"Home\"), /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    active: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }, \"Rideshare\")), /*#__PURE__*/React.createElement(Header, {\n    size: \"h1\",\n    text: \"Rideshares\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    widths: \"equal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Input, {\n    width: \"7\",\n    type: \"number\",\n    fluid: true,\n    name: \"numberOfPassengers\",\n    label: \"Number of Passengers\",\n    content: \"numberOfPassengers\",\n    onChange: handleChange,\n    placeholder: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(LocationDropdown, {\n    isAdmin: props.isAdmin,\n    displayText: \"Point Of Departure\",\n    locationType: \"departure\",\n    onChange: setLocationInState,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(LocationDropdown, {\n    isAdmin: props.isAdmin,\n    displayText: \"Point Of Arrival\",\n    locationType: \"arrival\",\n    onChange: setLocationInState,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    stackable: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Column, {\n    floated: \"left\",\n    width: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    name: \"leavingAt\",\n    className: \"rideshare-date-pickers\",\n    label: \"Leaving At\",\n    type: \"date\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(Grid.Column, {\n    floated: \"right\",\n    width: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    name: \"arrivingAt\",\n    className: \"rideshare-date-pickers\",\n    label: \"Arriving At\",\n    type: \"date\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(Grid.Column, {\n    className: \"seeking-radios\",\n    width: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Form.Field, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 33\n    }\n  }, \"Offering/Seeking?\"), /*#__PURE__*/React.createElement(Form.Field, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    radio: true,\n    label: \"Offering\",\n    name: \"checkboxRadioGroup\",\n    checked: !formState.seeking,\n    onChange: function onChange(e) {\n      return updateTypeValue(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(Form.Field, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    radio: true,\n    label: \"Seeking\",\n    name: \"checkboxRadioGroup\",\n    checked: formState.seeking,\n    onChange: function onChange(e) {\n      return updateTypeValue(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 37\n    }\n  }))))), /*#__PURE__*/React.createElement(Form.TextArea, {\n    name: \"additionalInformation\",\n    content: \"additionalInformation\",\n    onChange: handleChange,\n    label: \"Additional Information\",\n    placeholder: \"What else should people know about your trip... (max 500 characters)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Form.Button, {\n    onClick: function onClick(e) {\n      return addRideshare(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 21\n    }\n  }, \"Submit\")), loading ? /*#__PURE__*/React.createElement(BarLoader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 25\n    }\n  }) : /*#__PURE__*/React.createElement(Table, {\n    celled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Table.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Table.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Table.HeaderCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 37\n    }\n  }, \"Contact\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 37\n    }\n  }, \"Offering/Seeking\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 37\n    }\n  }, \"Point of Departure\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 37\n    }\n  }, \"Point of Arrival\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 37\n    }\n  }, \"# of Seats Available/# of Seats Needed\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 37\n    }\n  }, \"Leaving at\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 37\n    }\n  }, \"Arriving at\"))), /*#__PURE__*/React.createElement(Table.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 29\n    }\n  }, rideshares && rideshares.map(function (rideshare, i) {\n    return /*#__PURE__*/React.createElement(RideshareRow, {\n      key: i,\n      currentUserId: props.userId,\n      rideshare: rideshare,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 37\n      }\n    });\n  })))));\n}","map":{"version":3,"sources":["/Users/diehl/Documents/Projects/icfc/app/javascript/src/components/rideshare/Index.js"],"names":["React","useEffect","useState","Header","BarLoader","Table","Form","Input","Grid","Container","Checkbox","Breadcrumb","axiosClient","useDispatch","actions","RideshareRow","LocationDropdown","initialFormState","numberOfPassengers","additionalInformation","arrivingAt","departingAt","departureLocationId","arrivalLocationId","seeking","Rideshare","props","loading","setLoading","sessionId","setSessionId","rideshares","setRideshares","formState","setFormState","dispatch","userId","isMounted","get","then","res","data","err","setErrors","handleChange","e","target","name","value","prevState","getRideshares","loadingStart","loadingFinish","updateTypeValue","preventDefault","addRideshare","body","number_of_passengers","additional_information","point_of_arrival_id","point_of_departure_id","user_id","arriving_at","departing_at","leavingAt","post","setSuccessMessages","response","errors","setLocationInState","locationId","locationType","key","isAdmin","map","rideshare","i"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Header from '../shared/PageTitle';\nimport BarLoader from 'react-spinners/BarLoader';\nimport { Table, Form, Input, Grid, Container, Checkbox } from 'semantic-ui-react';\nimport { Breadcrumb } from 'react-bootstrap';\nimport axiosClient from '../../services/axios';\nimport \"./rideshare.css\";\n\nimport { useDispatch } from 'react-redux';\nimport * as actions from '../../store/actions/index';\n\nimport RideshareRow from './RideshareItem';\nimport LocationDropdown from './LocationDropdown';\n\nconst initialFormState = {\n    numberOfPassengers: 0,\n    additionalInformation: '',\n    arrivingAt: null,\n    departingAt: null,\n    departureLocationId: null,\n    arrivalLocationId: null,\n    seeking: true\n}\n\nexport default function Rideshare(props) {\n    const [loading, setLoading] = useState(false);\n    const [sessionId, setSessionId] = useState(null);\n    const [rideshares, setRideshares] = useState([]);\n    const [formState, setFormState] = useState(initialFormState);\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        setSessionId(props.userId);\n        let isMounted = true;\n        axiosClient.get('rideshares')\n        .then(res => {\n            if (isMounted) {\n                setRideshares(res.data);\n            }\n        })\n        .catch(err => {\n            setRideshares([]);\n            dispatch(actions.setErrors(\n                \"We're having trouble finding rideshares for your request. Please try again later\"\n            ));\n        });\n        return () => {\n            isMounted = false;\n        }\n    }, []);\n\n    const handleChange = (e) => {\n        const { name, value } = e.target;\n        setFormState(prevState => ({...prevState, [name]: value }));\n    };\n\n    const getRideshares = () => {\n        dispatch(actions.loadingStart());\n        axiosClient.get('rideshares')\n        .then(res => {\n            setRideshares(res.data);\n        })\n        .catch(err => {\n            setRideshares([]);\n            dispatch(actions.setErrors(\n                \"We're having trouble finding rideshares for your request. Please try again later\"\n            ));\n        });\n        dispatch(actions.loadingFinish());\n    }\n\n    const updateTypeValue = (e) => {\n        e.preventDefault();\n        setFormState(prevState => ({...prevState, seeking: !formState.seeking }));\n    }\n\n    const addRideshare = (e) => {\n        e.preventDefault();\n        dispatch(actions.loadingStart());\n        let body = {\n            number_of_passengers: formState.numberOfPassengers,\n            additional_information: formState.additionalInformation,\n            point_of_arrival_id: formState.departureLocationId, \n            point_of_departure_id: formState.arrivalLocationId,\n            user_id: props.userId,\n            arriving_at: formState.arrivingAt,\n            departing_at: formState.leavingAt,\n            seeking: formState.seeking\n        }\n        axiosClient.post('rideshares/create', body)\n        .then(() => {\n            getRideshares();\n            setFormState(initialFormState);\n            dispatch(actions.setSuccessMessages(\"Rideshare Added!\"))\n        })\n        .catch(err => {\n            dispatch(actions.setErrors(err.response.data.errors));\n        });\n        dispatch(actions.loadingFinish())\n    }\n\n    const setLocationInState = (locationId, locationType) => {\n        const key = locationType + 'LocationId';\n        setFormState(prevState => ({...prevState, [key]: locationId }))\n    }\n\n    return (\n        <div className=\"reactPageAppContainer\">\n            <Breadcrumb>\n                <Breadcrumb.Item href=\"/\">Home</Breadcrumb.Item>\n                <Breadcrumb.Item active>Rideshare</Breadcrumb.Item>\n            </Breadcrumb>\n            <Header \n                size=\"h1\"\n                text=\"Rideshares\"\n            />\n            <Container>\n                <Form>\n                    <Form.Group widths='equal'>\n                        <Form.Input \n                            width='7'\n                            type='number' \n                            fluid \n                            name='numberOfPassengers'\n                            label='Number of Passengers'\n                            content='numberOfPassengers' \n                            onChange={handleChange} \n                            placeholder='0' \n                        />\n                        <LocationDropdown\n                            isAdmin={props.isAdmin}\n                            displayText='Point Of Departure'\n                            locationType='departure'\n                            onChange={setLocationInState}\n                        />\n                        <LocationDropdown\n                            isAdmin={props.isAdmin}\n                            displayText='Point Of Arrival'\n                            locationType='arrival'\n                            onChange={setLocationInState}\n                        />\n                    </Form.Group>\n                    <Form.Group>\n                        <Grid stackable>\n                            <Grid.Column floated=\"left\" width={4}>\n                                <Input\n                                    name='leavingAt'\n                                    className=\"rideshare-date-pickers\"\n                                    label=\"Leaving At\" \n                                    type=\"date\" \n                                    onChange={handleChange} \n                                />\n                            </Grid.Column>\n                            <Grid.Column floated=\"right\" width={4}>\n                                <Input\n                                    name='arrivingAt'\n                                    className=\"rideshare-date-pickers\"\n                                    label=\"Arriving At\"\n                                    type=\"date\" \n                                    onChange={handleChange} \n                                />\n                            </Grid.Column>\n                            <Grid.Column className=\"seeking-radios\" width={2}>\n                                <Form.Field>\n                                    Offering/Seeking?\n                                </Form.Field>\n                                <Form.Field>\n                                    <Checkbox\n                                        radio\n                                        label='Offering'\n                                        name='checkboxRadioGroup'\n                                        checked={!formState.seeking}\n                                        onChange={(e) => updateTypeValue(e)}\n                                    />\n                                </Form.Field>\n                                <Form.Field>\n                                    <Checkbox\n                                        radio\n                                        label='Seeking'\n                                        name='checkboxRadioGroup'\n                                        checked={formState.seeking}\n                                        onChange={(e) => updateTypeValue(e)}\n                                    />\n                                </Form.Field>\n                            </Grid.Column>\n                        </Grid>\n                    </Form.Group>\n                    <Form.TextArea\n                        name='additionalInformation'\n                        content='additionalInformation' \n                        onChange={handleChange}\n                        label='Additional Information' \n                        placeholder='What else should people know about your trip... (max 500 characters)' \n                    />\n                    <Form.Button onClick={e => addRideshare(e)}>Submit</Form.Button>\n                </Form>\n                {\n                    loading ? (\n                        <BarLoader />\n                    ) : (\n                        <Table celled>\n                            <Table.Header>\n                                <Table.Row>\n                                    <Table.HeaderCell>Contact</Table.HeaderCell>\n                                    <Table.HeaderCell>Offering/Seeking</Table.HeaderCell>\n                                    <Table.HeaderCell>Point of Departure</Table.HeaderCell>\n                                    <Table.HeaderCell>Point of Arrival</Table.HeaderCell>\n                                    <Table.HeaderCell># of Seats Available/# of Seats Needed</Table.HeaderCell>\n                                    <Table.HeaderCell>Leaving at</Table.HeaderCell>\n                                    <Table.HeaderCell>Arriving at</Table.HeaderCell>\n                                </Table.Row>\n                            </Table.Header>\n                            <Table.Body>\n                                {rideshares && rideshares.map((rideshare, i) => (\n                                    <RideshareRow\n                                        key={i}\n                                        currentUserId={props.userId}\n                                        rideshare={rideshare}\n                                    />\n                                ))}\n                            </Table.Body>\n                        </Table>\n                    )\n                }\n            </Container>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}