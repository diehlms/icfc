{"ast":null,"code":"var _jsxFileName = \"/Users/diehl/Documents/Projects/icfc/app/javascript/src/components/rideshare/RideshareItem.js\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useEffect, useState } from 'react';\nimport { Table } from 'semantic-ui-react';\nimport RideshareModal from './RideshareModal';\nimport { useDispatch } from 'react-redux';\nimport * as actions from '../../store/actions/index';\nimport axiosClient from '../../services/axios';\nimport * as moment from 'moment';\nexport default function RideshareRow(props) {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      arrivalLocationName = _useState2[0],\n      setArrivalLocationName = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      departureLocationName = _useState4[0],\n      setDepartureLocationName = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      user = _useState6[0],\n      setUser = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      open = _useState8[0],\n      setOpen = _useState8[1];\n\n  var dispatch = useDispatch();\n\n  var _deleteRideshare = function deleteRideshare(e, id) {\n    e.preventDefault();\n    axiosClient[\"delete\"](\"rideshares/destroy/\".concat(id)).then(function () {\n      props.getRideshares();\n    })[\"catch\"](function (err) {\n      dispatch(actions.setErrors(\"Sorry. Looks like that didn't work. Please try again later.\"));\n    });\n    setOpen(false);\n  };\n\n  useEffect(function () {\n    var mounted = true;\n    ['departure', 'arrival'].forEach(function (location) {\n      var id = location === 'departure' ? props.rideshare.point_of_departure_id : props.rideshare.point_of_arrival_id;\n      axiosClient.get(\"location_points/get_single/\".concat(id)).then(function (res) {\n        if (mounted) {\n          if (location === 'departure') {\n            setDepartureLocationName(res.data.location_name);\n          } else {\n            setArrivalLocationName(res.data.location_name);\n          }\n        }\n      })[\"catch\"](function (err) {\n        dispatch(actions.setErrors(\"Sorry. Looks like that didn't work. Please try again later.\"));\n      });\n    });\n    axiosClient.get(\"users/\".concat(props.rideshare.user_id)).then(function (res) {\n      if (mounted) {\n        setUser({\n          name: \"\".concat(res.data.firstname, \" \").concat(res.data.lastname, \" (\").concat(res.data.email, \")\"),\n          email: res.data.email,\n          phoneNumber: res.data.phone_number\n        });\n      }\n    })[\"catch\"](function (err) {\n      dispatch(actions.setErrors(\"Sorry. Looks like that didn't work. Please try again later.\"));\n    });\n    return function () {\n      mounted = false;\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, open ? /*#__PURE__*/React.createElement(RideshareModal, {\n    currentUserId: props.currentUserId,\n    user: user,\n    rideshare: props.rideshare,\n    arrivalLocationName: arrivalLocationName,\n    departureLocationName: departureLocationName,\n    open: open,\n    closeModal: function closeModal() {\n      return setOpen(false);\n    },\n    deleteRideshare: function deleteRideshare(e) {\n      return _deleteRideshare(e, props.rideshare.id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }) : /*#__PURE__*/React.createElement(Table.Row, {\n    className: \"row-hover\",\n    onClick: function onClick() {\n      return setOpen(true);\n    },\n    key: props.rideshare.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Table.Cell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }, user.name), /*#__PURE__*/React.createElement(Table.Cell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, props.rideshare.seeking ? 'Seeking' : 'Offering'), /*#__PURE__*/React.createElement(Table.Cell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 21\n    }\n  }, arrivalLocationName), /*#__PURE__*/React.createElement(Table.Cell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 21\n    }\n  }, departureLocationName), /*#__PURE__*/React.createElement(Table.Cell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  }, props.rideshare.number_of_passengers), /*#__PURE__*/React.createElement(Table.Cell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }\n  }, moment(props.rideshare.departing_at).add(1, 'days').format(\"MM/DD/YYYY\")), /*#__PURE__*/React.createElement(Table.Cell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }, moment(props.rideshare.arriving_at).add(1, 'days').format(\"MM/DD/YYYY\"))));\n}","map":{"version":3,"sources":["/Users/diehl/Documents/Projects/icfc/app/javascript/src/components/rideshare/RideshareItem.js"],"names":["React","useEffect","useState","Table","RideshareModal","useDispatch","actions","axiosClient","moment","RideshareRow","props","arrivalLocationName","setArrivalLocationName","departureLocationName","setDepartureLocationName","user","setUser","open","setOpen","dispatch","deleteRideshare","e","id","preventDefault","then","getRideshares","err","setErrors","mounted","forEach","location","rideshare","point_of_departure_id","point_of_arrival_id","get","res","data","location_name","user_id","name","firstname","lastname","email","phoneNumber","phone_number","currentUserId","seeking","number_of_passengers","departing_at","add","format","arriving_at"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Table } from 'semantic-ui-react'\nimport RideshareModal from './RideshareModal';\n\nimport { useDispatch } from 'react-redux';\nimport * as actions from '../../store/actions/index';\nimport axiosClient from '../../services/axios';\n\nimport * as moment from 'moment';\n\nexport default function RideshareRow(props) {\n    const [arrivalLocationName, setArrivalLocationName] = useState('');\n    const [departureLocationName, setDepartureLocationName] = useState('');\n    const [user, setUser] = useState('');\n    const [open, setOpen] = useState(false);\n\n    const dispatch = useDispatch();\n\n    const deleteRideshare = (e, id) => {\n        e.preventDefault();\n        axiosClient.delete(`rideshares/destroy/${id}`)\n        .then(() => {\n            props.getRideshares();\n        })\n        .catch(err => {\n            dispatch(actions.setErrors(\n                \"Sorry. Looks like that didn't work. Please try again later.\"\n            ));\n        });\n        setOpen(false);\n    }\n\n    useEffect(() => {\n        let mounted = true;\n        ['departure', 'arrival'].forEach(location => {\n            const id = location === 'departure' ?\n                props.rideshare.point_of_departure_id : \n                props.rideshare.point_of_arrival_id;\n            axiosClient.get(`location_points/get_single/${id}`)\n            .then(res => {\n                if (mounted) {\n                    if (location === 'departure') {\n                        setDepartureLocationName(res.data.location_name);\n                    } else {\n                        setArrivalLocationName(res.data.location_name);\n                    }\n                }\n            })\n            .catch(err => {\n                dispatch(actions.setErrors(\n                    \"Sorry. Looks like that didn't work. Please try again later.\"\n                ));\n            });\n        });\n        axiosClient.get(`users/${props.rideshare.user_id}`)\n        .then(res => {\n            if (mounted) {\n                setUser({\n                    name: `${res.data.firstname} ${res.data.lastname} (${res.data.email})`,\n                    email: res.data.email,\n                    phoneNumber: res.data.phone_number\n                });\n            }\n        })\n        .catch(err => {\n            dispatch(actions.setErrors(\n                \"Sorry. Looks like that didn't work. Please try again later.\"\n            ));\n        });\n        return () => {\n            mounted = false;\n        }\n    }, []);\n\n    return (\n        <React.Fragment>\n            { open ? (\n                <RideshareModal\n                    currentUserId={props.currentUserId}\n                    user={user}\n                    rideshare={props.rideshare}\n                    arrivalLocationName={arrivalLocationName}\n                    departureLocationName={departureLocationName} \n                    open={open}\n                    closeModal={() => setOpen(false)}\n                    deleteRideshare={e => deleteRideshare(e, props.rideshare.id)}\n                />\n            ) : (\n                <Table.Row className=\"row-hover\" onClick={() => setOpen(true)}key={props.rideshare.id}>\n                    <Table.Cell>{user.name}</Table.Cell>\n                    <Table.Cell>{props.rideshare.seeking ? 'Seeking' : 'Offering'}</Table.Cell>\n                    <Table.Cell>{arrivalLocationName}</Table.Cell>\n                    <Table.Cell>{departureLocationName}</Table.Cell>\n                    <Table.Cell>{props.rideshare.number_of_passengers}</Table.Cell>\n                    <Table.Cell>{moment(props.rideshare.departing_at).add(1, 'days').format(\"MM/DD/YYYY\")}</Table.Cell>\n                    <Table.Cell>{moment(props.rideshare.arriving_at).add(1, 'days').format(\"MM/DD/YYYY\")}</Table.Cell>\n                </Table.Row>\n            )}\n        </React.Fragment>\n\n    );\n}"]},"metadata":{},"sourceType":"module"}