{"ast":null,"code":"var _jsxFileName = \"/Users/diehl/Documents/Projects/icfc/app/javascript/src/components/rideshare/LocationDropdown.js\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useEffect, useState } from 'react';\nimport { Dropdown, Input, Button } from 'semantic-ui-react';\nimport axiosClient from '../../services/axios';\nimport { useDispatch } from 'react-redux';\nimport * as actions from '../../store/actions/index';\nexport default function LocationDropdown(props) {\n  var _this = this;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      location = _useState2[0],\n      setLocation = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      locations = _useState4[0],\n      setLocations = _useState4[1];\n\n  var dispatch = useDispatch();\n  useEffect(function () {\n    var isMounted = true;\n    axiosClient.get('location_points').then(function (res) {\n      if (isMounted) {\n        setLocations(res.data);\n      }\n    })[\"catch\"](function (err) {\n      dispatch(actions.setErrors(\"We're having trouble finding locations for your request. Please try again later\"));\n    });\n    return function () {\n      isMounted = false;\n    };\n  }, []);\n\n  var getLocations = function getLocations() {\n    axiosClient.get('location_points').then(function (res) {\n      setLocations(res.data);\n    })[\"catch\"](function (err) {\n      dispatch(actions.setErrors(\"We're having trouble finding locations for your request. Please try again later\"));\n    });\n  };\n\n  var deleteLocation = function deleteLocation(e, id) {\n    e.preventDefault();\n    axiosClient[\"delete\"](\"location_points/destroy/\".concat(id)).then(function () {\n      getLocations();\n    })[\"catch\"](function (err) {\n      dispatch(actions.setErrors(\"Cant delete a location already being used. First delete the rideshare.\"));\n    });\n  };\n\n  function emitLocationId(e, event, locationType, name) {\n    e.preventDefault();\n    setLocation(name);\n    props.onChange(event, locationType);\n  }\n\n  var addLocation = function addLocation(e) {\n    var body = {\n      location_name: location,\n      location_description: ''\n    };\n    axiosClient.post('location_points/create', body).then(function () {\n      getLocations();\n    })[\"catch\"](function (err) {\n      dispatch(actions.setErrors(err.response.data.errors));\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Dropdown, {\n    closeOnEscape: false,\n    closeOnChange: false,\n    className: \"location-dropdown\",\n    text: location !== '' ? location : props.displayText,\n    labeled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Dropdown.Menu, {\n    className: \"location-dropdown-menu-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Dropdown.Header, {\n    content: \"Locations\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Dropdown.Menu, {\n    scrolling: true,\n    className: \"location-dropdown-menu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 25\n    }\n  }, locations.map(function (option, i) {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      key: i,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Dropdown.Item, {\n      key: option.id,\n      onClick: function onClick(e) {\n        return emitLocationId(e, option.id, props.locationType, option.location_name);\n      },\n      value: location,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 45\n      }\n    }, option.location_name, props.isAdmin ? /*#__PURE__*/React.createElement(Button, {\n      size: \"mini\",\n      color: \"red\",\n      className: \"delete-location-btn\",\n      onClick: function onClick(e) {\n        return deleteLocation(e, option.id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 53\n      }\n    }, \"Delete\") : /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 53\n      }\n    }))));\n  })), /*#__PURE__*/React.createElement(Dropdown.Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 25\n    }\n  }, \"Don't see your location above?\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 25\n    }\n  }, \"Add a new one here:\"), /*#__PURE__*/React.createElement(Input, {\n    onClick: function onClick(e) {\n      return e.stopPropagation();\n    },\n    onChange: function onChange(e) {\n      return setLocation(e.target.value);\n    },\n    value: location,\n    onKeyDown: function onKeyDown(e) {\n      return e.keyCode === 32 ? e.stopPropagation() : null;\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    pointing: \"above\",\n    add: props.inputName,\n    onClick: function onClick(e) {\n      return addLocation(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 25\n    }\n  }, \"Add New Location\")))));\n}","map":{"version":3,"sources":["/Users/diehl/Documents/Projects/icfc/app/javascript/src/components/rideshare/LocationDropdown.js"],"names":["React","useEffect","useState","Dropdown","Input","Button","axiosClient","useDispatch","actions","LocationDropdown","props","location","setLocation","locations","setLocations","dispatch","isMounted","get","then","res","data","err","setErrors","getLocations","deleteLocation","e","id","preventDefault","emitLocationId","event","locationType","name","onChange","addLocation","body","location_name","location_description","post","response","errors","displayText","map","option","i","isAdmin","stopPropagation","target","value","keyCode","inputName"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Dropdown, Input, Button } from 'semantic-ui-react';\nimport axiosClient from '../../services/axios';\n\nimport { useDispatch } from 'react-redux';\nimport * as actions from '../../store/actions/index';\n\nexport default function LocationDropdown(props) {\n    const [location, setLocation] = useState('');\n    const [locations, setLocations] = useState([]);\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        let isMounted = true;\n        axiosClient.get('location_points')\n        .then(res => {\n            if (isMounted) {\n                setLocations(res.data);\n            }\n        })\n        .catch(err => {\n            dispatch(actions.setErrors(\"We're having trouble finding locations for your request. Please try again later\"));\n        });\n        return () => {\n            isMounted = false;\n        }\n    }, []);\n    \n    const getLocations = () => {\n        axiosClient.get('location_points')\n        .then(res => {\n            setLocations(res.data);\n        })\n        .catch(err => {\n            dispatch(actions.setErrors(\"We're having trouble finding locations for your request. Please try again later\"));\n        });\n    }\n\n    const deleteLocation = (e, id) => {\n        e.preventDefault();\n        axiosClient.delete(`location_points/destroy/${id}`)\n        .then(() => {\n            getLocations();\n        })\n        .catch(err => {\n            dispatch(actions.setErrors(\"Cant delete a location already being used. First delete the rideshare.\"));\n        });\n    }\n    \n    function emitLocationId(e, event, locationType, name) {\n        e.preventDefault();\n        setLocation(name);\n        props.onChange(event, locationType);\n    }\n\n    const addLocation = (e) => {\n        let body = {\n            location_name: location,\n            location_description: ''\n        }\n        axiosClient.post('location_points/create', body)\n        .then(() => {\n            getLocations();\n        })\n        .catch(err => {\n            dispatch(actions.setErrors(err.response.data.errors));\n        });\n    }\n\n    return (\n        <React.Fragment>\n            <Dropdown\n                closeOnEscape={false}\n                closeOnChange={false}\n                className=\"location-dropdown\"\n                text={location !== '' ? location : props.displayText}\n                labeled\n            >\n                <Dropdown.Menu className=\"location-dropdown-menu-wrap\">\n                    <Dropdown.Header content='Locations' />\n                        <Dropdown.Menu scrolling className=\"location-dropdown-menu\">\n                            {locations.map((option, i) => {\n                                return (\n                                    <React.Fragment key={i}>\n                                        <Dropdown.Item\n                                            key={option.id}\n                                            onClick={e => emitLocationId(\n                                                e, \n                                                option.id, \n                                                props.locationType,\n                                                option.location_name\n                                            )} \n                                            value={location}\n                                        >\n                                            <p>{option.location_name}\n                                                {props.isAdmin ? (\n                                                    <Button\n                                                        size=\"mini\"\n                                                        color=\"red\" \n                                                        className=\"delete-location-btn\" \n                                                        onClick={e => deleteLocation(e, option.id)}>\n                                                        Delete\n                                                    </Button>\n                                                ) : (\n                                                    <React.Fragment />\n                                                )}\n                                            </p>\n                                        </Dropdown.Item>\n                                    </React.Fragment>\n                                )\n                            })}\n                        </Dropdown.Menu>\n                    <Dropdown.Divider />\n                    <Dropdown.Item>\n                        <p>Don't see your location above?</p>\n                        <p>Add a new one here:</p>\n                        <Input\n                            onClick={e => e.stopPropagation()} \n                            onChange={e => setLocation(e.target.value)}\n                            value={location}\n                            onKeyDown={(e) =>\n                                e.keyCode === 32 ? e.stopPropagation() : null\n                            }\n                        />\n                    </Dropdown.Item>\n                    <Dropdown.Item>\n                        <Button\n                            pointing=\"above\" \n                            add={props.inputName}\n                            onClick={e => addLocation(e)}>\n                            Add New Location\n                        </Button>\n                    </Dropdown.Item>\n                </Dropdown.Menu>\n            </Dropdown>\n        </React.Fragment>\n    )\n}"]},"metadata":{},"sourceType":"module"}